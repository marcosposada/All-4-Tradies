<?php
    /**
     * Magento
     *
     * NOTICE OF LICENSE
     *
     * This source file is subject to the Open Software License (OSL 3.0)
     * that is bundled with this package in the file LICENSE.txt.
     * It is also available through the world-wide-web at this URL:
     * http://opensource.org/licenses/osl-3.0.php
     * If you did not receive a copy of the license and are unable to
     * obtain it through the world-wide-web, please send an email
     * to license@magentocommerce.com so we can send you a copy immediately.
     *
     * DISCLAIMER
     *
     * Do not edit or add to this file if you wish to upgrade Magento to newer
     * versions in the future. If you wish to customize Magento for your
     * needs please refer to http://www.magentocommerce.com for more information.
     *
     * @category    Mage
     * @package     Mage_Adminhtml
     * @copyright   Copyright (c) 2011 Magento Inc. (http://www.magentocommerce.com)
     * @license     http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
     */

    /**
     * Adminhtml customer grid block
     *
     * @category   Mage
     * @package    Mage_Adminhtml
     * @author      Magento Core Team <core@magentocommerce.com>
     */
    class Smithandrowe_Profile_Adminhtml_Block_Customer_Grid extends Mage_Adminhtml_Block_Customer_Grid
    {

        protected function _prepareColumns()
        {
            $this->addColumn('entity_id', array(
                'header' => Mage::helper('customer')->__('ID'),
                'width' => '50px',
                'index' => 'entity_id',
                'type' => 'number',
            ));
            /*$this->addColumn('firstname', array(
                'header'    => Mage::helper('customer')->__('First Name'),
                'index'     => 'firstname'
            ));
            $this->addColumn('lastname', array(
                'header'    => Mage::helper('customer')->__('Last Name'),
                'index'     => 'lastname'
            ));*/
            $this->addColumn('name', array(
                'header' => Mage::helper('customer')->__('Name'),
                'index' => 'name'
            ));
            $this->addColumn('email', array(
                'header' => Mage::helper('customer')->__('Email'),
                'width' => '150',
                'index' => 'email'
            ));

            $groups = Mage::getResourceModel('customer/group_collection')
                ->addFieldToFilter('customer_group_id', array('gt' => 0))
                ->load()
                ->toOptionHash();

            $this->addColumn('group', array(
                'header' => Mage::helper('customer')->__('Group'),
                'width' => '100',
                'index' => 'group_id',
                'type' => 'options',
                'options' => $groups,
            ));
            /*
            $attribute = Mage::getModel('eav/config')->getAttribute('customer','salesrep');
            $options = $attribute->getSource()->getAllOptions();

            $salesReps = array();
            foreach($options as $option){
                if (!$option['value'] == null) {
                    $salesReps[$option['value']] = $option['label'];
                }
            }

            $this->addColumn('salesrep', array(
                'header'    =>  Mage::helper('customer')->__('Sales Rep'),
                'width'     =>  '100',
                'index'     =>  'salesrep',
                'type'      =>  'options',
                'options'   =>  $salesReps,
            ));
            */
            $this->addColumn('Telephone', array(
                'header' => Mage::helper('customer')->__('Telephone'),
                'width' => '100',
                'index' => 'billing_telephone'
            ));

            $this->addColumn('billing_postcode', array(
                'header' => Mage::helper('customer')->__('ZIP'),
                'width' => '90',
                'index' => 'billing_postcode',
            ));

            $this->addColumn('billing_country_id', array(
                'header' => Mage::helper('customer')->__('Country'),
                'width' => '100',
                'type' => 'country',
                'index' => 'billing_country_id',
            ));

            $this->addColumn('billing_region', array(
                'header' => Mage::helper('customer')->__('State/Province'),
                'width' => '100',
                'index' => 'billing_region',
            ));

            $this->addColumn('customer_since', array(
                'header' => Mage::helper('customer')->__('Customer Since'),
                'type' => 'datetime',
                'align' => 'center',
                'index' => 'created_at',
                'gmtoffset' => true
            ));

            if (!Mage::app()->isSingleStoreMode()) {
                $this->addColumn('website_id', array(
                    'header' => Mage::helper('customer')->__('Website'),
                    'align' => 'center',
                    'width' => '80px',
                    'type' => 'options',
                    'options' => Mage::getSingleton('adminhtml/system_store')->getWebsiteOptionHash(true),
                    'index' => 'website_id',
                ));
            }

            $this->addColumn('action',
                array(
                    'header' => Mage::helper('customer')->__('Action'),
                    'width' => '100',
                    'type' => 'action',
                    'getter' => 'getId',
                    'actions' => array(
                        array(
                            'caption' => Mage::helper('customer')->__('Edit'),
                            'url' => array('base' => '*/*/edit'),
                            'field' => 'id'
                        )
                    ),
                    'filter' => false,
                    'sortable' => false,
                    'index' => 'stores',
                    'is_system' => true,
                ));

            $this->addExportType('*/*/exportCsv', Mage::helper('customer')->__('CSV'));
            $this->addExportType('*/*/exportXml', Mage::helper('customer')->__('Excel XML'));
            return parent::_prepareColumns();
        }
    }
